<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<style>
#adun_stage {
    border: 1px solid black;
}
</style>
<body>
</body>
</html>
<script src="./adun.js"></script>
<script src="./tmp/adun_geom.js"></script>
<script>
var base = [
  [  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  2,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  0,  2,  2,  2,  2,  2,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0]
];

var colMap = [
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  1,  1,  1,  1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  1,  1,  1,  1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  1,  1,  1,  1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0],
  [  1,  1,  1,  1,  1,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0, 0, 0, 0]
];

var Heart = new adun.Heart(240, 240);
Heart.scale = 1;
Heart.fps = 30;
Heart.preload({
    pig: './img/pig.png',
    map: './img/map.png'
});



Heart.pump(function() {
    var map = new adun.Map(16, 16);
    map.image = Heart.assets['map'];
    map.loadData(base);
    map.collisionData = colMap;

    var pig = new adun.Sprite(32, 32);
    pig.image = Heart.assets['pig'];
    pig.frame = [1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4];
    pig.scale(-1,1);

    var pig2 = new adun.Sprite(32, 32);
    pig2.image = Heart.assets['pig'];
    pig2.frame = [1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4];
    pig2.scale(-1,1);

    pig.x = 16;
    pig.y = 16;

    pig2.x = 128;
    pig2.y = 128;

    var label = new adun.Label('김나와라뚝딱뚝딱 맛잇는소리<br>ddd');
    label.width = 30;
    label.textAlign = 'left';



    Heart.rootScene.addChild(map);
    Heart.rootScene.addChild(pig2);
    Heart.rootScene.addChild(pig);
    Heart.rootScene.addChild(label);



    Heart.on('enterframe', function() {
            if( Heart.input.right ) {
                pig.x += 1;
                map._offsetX -=1;

            }
            if( Heart.input.left ) {
                    pig.x -= 1;
                map._offsetX +=1;
            }
            if( Heart.input.up ) {
                pig.y -= 1;
            }
            if( Heart.input.down ) {
                pig.y += 1;
            }

            if( pig.intersect(pig2) ) {
                //alert('충돌!');
            }
    });





    pig.on('clickstart', function() {
        pig.x += 1;
    });


});

Heart.debug();
</script>
